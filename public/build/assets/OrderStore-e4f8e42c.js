import{M as a,u as i,G as t}from"./app-b08cb953.js";import{u as o}from"./useFlash-691fd3c4.js";const c=a("OrderStore",{state:()=>({form:i({title:"Writer's Choice",academic_level_id:2,subject_id:1,service_type_id:1,deadline:336,pages:1,slides:0,sources:1,instructions:"",referencing_style_id:1,spacing_id:1,writer_category_id:1,discount_id:"",currency_id:2,language_id:1,extra:"",files:[],amount:"",name:"",email:"",password:"",password_confirmation:""}),currencies:{},discounts:{},extras:{},languages:{},levels:{},order:Object,services:{},rates:{},spacings:{},styles:{},subjects:{},writerCategories:{}}),actions:{async loadOrderDependencies(){const{flash:r}=o();try{const s=await t.get("/api/orders/new");if(s.status===200){console.log(s.data);const e=s.data;this.currencies=e.currencies??null,this.discounts=e.discounts??null,this.extras=e.extras??null,this.languages=e.languages??null,this.levels=e.levels??null,this.order=e.order??null,this.rates=e.rates??null,this.spacings=e.spacings??null,this.styles=e.styles??null,this.subjects=e.subjects??null,this.writerCategories=e.writerCategories??null}else r("Oops",`Could not initialize some details. Server responded with ${s.status} status code! Kindly reload the page.`,"error")}catch(s){console.error(s),r(`Error! ${s.name}`,`Unable to complete the request. Failed to establish a connection.
 ${s.message}`,"error")}},saveToLocal(r=this.form){localStorage.setItem("newOrder",JSON.stringify(r))},getFromLocal(){this.form=JSON.parse(localStorage.getItem("newOrder"))},async saveToDB(r=this.form){const{flash:s}=o();try{const e=await t.post(route("orders.new"),r);e.status===200&&(console.log("Success.",e.data),localStorage.removeItem("newOrder"),s("Success!","Order saved successfully. Redirecting to Checkout.","success"),setTimeout(()=>{window.location.href=`/orders/preview/${e.data.order.id}`},4e3))}catch(e){console.log(e),s("Error!","The request was not successful. Failed to establish connection with the server.","error")}}},getters:{}});export{c as u};
